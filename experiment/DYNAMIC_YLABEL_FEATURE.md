# ã‚°ãƒ©ãƒ•ã®ç¸¦è»¸ãƒ©ãƒ™ãƒ«å‹•çš„è¡¨ç¤ºæ©Ÿèƒ½

## ğŸ¯ å®Ÿè£…å®Œäº†ï¼

ã‚°ãƒ©ãƒ•ã®ç¸¦è»¸ãƒ©ãƒ™ãƒ«ã¨ã‚¿ã‚¤ãƒˆãƒ«ãŒã€Web UIã‹ã‚‰å…¥åŠ›ã—ãŸã‚·ã‚°ãƒŠãƒ«åã‚’ä½¿ã£ã¦**å‹•çš„ã«è¡¨ç¤º**ã•ã‚Œã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚

---

## âœ¨ å¤‰æ›´å†…å®¹

### 1. `visualize.m` ã®æ”¹å–„

#### æ–°ã—ã„å¼•æ•°ã‚’è¿½åŠ 
```matlab
function visualize(trace, phi_str, up_robM, low_robM, up_optCau, low_optCau, outfile, signal_names)
```

**æ–°å¼•æ•°**: `signal_names` - ã‚«ãƒ³ãƒåŒºåˆ‡ã‚Šã®ã‚·ã‚°ãƒŠãƒ«åæ–‡å­—åˆ—

#### ã‚·ã‚°ãƒŠãƒ«åã®ãƒ‘ãƒ¼ã‚¹å‡¦ç†
```matlab
% ã‚·ã‚°ãƒŠãƒ«åã‚’é…åˆ—ã«å¤‰æ›
signal_name_list = strsplit(signal_names, ',');
signal_name_list = strtrim(signal_name_list);  % ç©ºç™½å‰Šé™¤
```

#### å‹•çš„ãªãƒ©ãƒ™ãƒ«è¨­å®š
```matlab
% å„ã‚·ã‚°ãƒŠãƒ«ã®ã‚¿ã‚¤ãƒˆãƒ«ã¨ç¸¦è»¸ãƒ©ãƒ™ãƒ«ã«ã‚·ã‚°ãƒŠãƒ«åã‚’ä½¿ç”¨
title(signal_name_list{s}, 'FontWeight','bold', 'Interpreter', 'none');
ylabel(signal_name_list{s}, 'Interpreter', 'none');
```

### 2. `MonitoringTCPServer.java` ã®æ”¹å–„

#### visualizeå‘¼ã³å‡ºã—ã«å¼•æ•°è¿½åŠ 
```java
// signal_str ã‚’ visualize ã«æ¸¡ã™
scriptBuilder.append("visualize(trace, phi_str, up_robM, low_robM, up_optCau, low_optCau, 'result_realtime.png', signal_str);\n");
```

---

## ğŸ“Š å®Ÿéš›ã®è¡¨ç¤ºä¾‹

### Beforeï¼ˆå¤‰æ›´å‰ï¼‰
```
ã‚¿ã‚¤ãƒˆãƒ«: Signal 1
ç¸¦è»¸: Value

ã‚¿ã‚¤ãƒˆãƒ«: Signal 2  
ç¸¦è»¸: Value
```

### Afterï¼ˆå¤‰æ›´å¾Œï¼‰

#### ã‚·ãƒŠãƒªã‚ª1: æ¸©åº¦ç›£è¦–
**Web UIã§å…¥åŠ›**: `temp,cooling`

```
ã‚¿ã‚¤ãƒˆãƒ«: temp
ç¸¦è»¸: temp

ã‚¿ã‚¤ãƒˆãƒ«: cooling
ç¸¦è»¸: cooling
```

#### ã‚·ãƒŠãƒªã‚ª2: ãƒãƒƒãƒ†ãƒªãƒ¼ç®¡ç†
**Web UIã§å…¥åŠ›**: `voltage,current,soc`

```
ã‚¿ã‚¤ãƒˆãƒ«: voltage
ç¸¦è»¸: voltage

ã‚¿ã‚¤ãƒˆãƒ«: current
ç¸¦è»¸: current

ã‚¿ã‚¤ãƒˆãƒ«: soc
ç¸¦è»¸: soc
```

#### ã‚·ãƒŠãƒªã‚ª3: ãƒ­ãƒœãƒƒãƒˆåˆ¶å¾¡
**Web UIã§å…¥åŠ›**: `position,velocity,target`

```
ã‚¿ã‚¤ãƒˆãƒ«: position
ç¸¦è»¸: position

ã‚¿ã‚¤ãƒˆãƒ«: velocity
ç¸¦è»¸: velocity

ã‚¿ã‚¤ãƒˆãƒ«: target
ç¸¦è»¸: target
```

---

## ğŸ§ª ãƒ†ã‚¹ãƒˆæ–¹æ³•

### 1. ã‚µãƒ¼ãƒãƒ¼ã‚’å†èµ·å‹•
```
java-server/src/main/java/org/CauMon/MonitoringHttpServer.java ã‚’å®Ÿè¡Œ
```

### 2. Web UIã§è¨­å®š
http://localhost:8080 ã«ã‚¢ã‚¯ã‚»ã‚¹

- **ã‚·ã‚°ãƒŠãƒ«å**: `temp,cooling`
- **STLå¼**: `alw_[0,10](temp[t] < 100)`
- **ãƒãƒ¼ãƒˆç•ªå·**: `9999`

ã€Œã‚µãƒ¼ãƒãƒ¼èµ·å‹•ã€ã‚’ã‚¯ãƒªãƒƒã‚¯

### 3. ãƒ‡ãƒ¼ã‚¿é€ä¿¡
```powershell
.\experiment\send_test_data.ps1
```

### 4. ã‚°ãƒ©ãƒ•ã‚’ç¢ºèª
- Signal 1ã®ã‚¿ã‚¤ãƒˆãƒ«ã¨ç¸¦è»¸ãŒ **ã€Œtempã€** ã«ãªã£ã¦ã„ã‚‹
- Signal 2ã®ã‚¿ã‚¤ãƒˆãƒ«ã¨ç¸¦è»¸ãŒ **ã€Œcoolingã€** ã«ãªã£ã¦ã„ã‚‹

---

## ğŸ”§ æŠ€è¡“çš„ãªè©³ç´°

### Interpreterè¨­å®š
```matlab
'Interpreter', 'none'
```
- ã‚¢ãƒ³ãƒ€ãƒ¼ã‚¹ã‚³ã‚¢ï¼ˆ`_`ï¼‰ãªã©ã®ç‰¹æ®Šæ–‡å­—ã‚’ãã®ã¾ã¾è¡¨ç¤º
- LaTeXè§£é‡ˆã‚’ç„¡åŠ¹åŒ–
- ä¾‹: `motor_speed` ãŒæ­£ã—ãè¡¨ç¤ºã•ã‚Œã‚‹

### å¾Œæ–¹äº’æ›æ€§
- `signal_names` å¼•æ•°ã¯ã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼ˆçœç•¥å¯èƒ½ï¼‰
- çœç•¥ã—ãŸå ´åˆã¯å¾“æ¥ã®ã€ŒSignal 1ã€ã€ŒSignal 2ã€ã‚’è¡¨ç¤º
- æ—¢å­˜ã® `Figure2a.m` ã‚„ `Figure2b.m` ã¯å½±éŸ¿ã‚’å—ã‘ãªã„

### ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
- ã‚·ã‚°ãƒŠãƒ«åã®æ•°ãŒå®Ÿéš›ã®ã‚·ã‚°ãƒŠãƒ«æ•°ã‚ˆã‚Šå°‘ãªã„å ´åˆã€æ®‹ã‚Šã¯ã€ŒSignal Nã€ã‚’è¡¨ç¤º
- ã‚«ãƒ³ãƒå‰å¾Œã®ç©ºç™½ã¯è‡ªå‹•å‰Šé™¤ï¼ˆ`strtrim`ï¼‰

---

## ğŸ“ ãƒ‡ãƒãƒƒã‚°æƒ…å ±

MATLAB Command Windowã«ä»¥ä¸‹ã®æƒ…å ±ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ï¼š

```
=== DEBUG INFO ===
Signal names: temp,cooling
Number of signals: 2
Time array length: 11
...
==================
```

ã“ã‚Œã«ã‚ˆã‚Šã€ã‚·ã‚°ãƒŠãƒ«åãŒæ­£ã—ãæ¸¡ã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèªã§ãã¾ã™ã€‚

---

## âœ… å‹•ä½œç¢ºèªãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

- [ ] ã‚µãƒ¼ãƒãƒ¼ã‚’å†èµ·å‹•ã—ãŸ
- [ ] Web UIã§ã‚·ã‚°ãƒŠãƒ«åã‚’å…¥åŠ›ã—ãŸï¼ˆ`temp,cooling`ï¼‰
- [ ] STLå¼ã‚’å…¥åŠ›ã—ãŸ
- [ ] ã‚µãƒ¼ãƒãƒ¼èµ·å‹•ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ãŸ
- [ ] ãƒ‡ãƒ¼ã‚¿ã‚’é€ä¿¡ã—ãŸï¼ˆ`send_test_data.ps1`ï¼‰
- [ ] ã‚°ãƒ©ãƒ•ã®ã‚¿ã‚¤ãƒˆãƒ«ãŒã€Œtempã€ã€Œcoolingã€ã«ãªã£ã¦ã„ã‚‹
- [ ] ç¸¦è»¸ãƒ©ãƒ™ãƒ«ãŒã€Œtempã€ã€Œcoolingã€ã«ãªã£ã¦ã„ã‚‹

---

## ğŸŠ å®Œæˆï¼

ã‚°ãƒ©ãƒ•ãŒ**ã‚ˆã‚Šç›´æ„Ÿçš„**ã«ãªã‚Šã¾ã—ãŸï¼
ã‚·ã‚°ãƒŠãƒ«åãŒä¸€ç›®ã§ã‚ã‹ã‚‹ãŸã‚ã€è¤‡æ•°ã®ã‚·ã‚°ãƒŠãƒ«ã‚’ç›£è¦–ã™ã‚‹éš›ã«éå¸¸ã«ä¾¿åˆ©ã§ã™ã€‚

**å®Ÿè£…æ—¥**: 2025å¹´11æœˆ17æ—¥

